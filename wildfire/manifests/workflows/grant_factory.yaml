version: 1
workflow_id: WF_GRANT_FACTORY
name: Grant Application Factory
owner: TITAN

steps:
  - id: step_ingest
    agent: AGENT_INGESTION_HYDRA
    action: ingest
    required_inputs: ["url"]
    output_key: "artifact_id"

  - id: step_context
    agent: AGENT_CONTEXT_ASSEMBLER
    action: assemble
    inputs:
      artifact_ref: "${step_ingest.artifact_id}"
      focus: "grant_eligibility"
    output_key: "packet_id"

  - id: step_draft
    agent: AGENT_WORKFLOW_CONDUCTOR
    action: generate_text
    atom: "llm_generate" # implied capability
    inputs:
      context_ref: "${step_context.packet_id}"
      prompt_template: "templates/grant_draft.txt"
    output_key: "draft_text"

  - id: step_notify
    agent: AGENT_REMOTE_BRIDGE
    action: notify
    inputs:
      channel: "telegram"
      message: "Grant Draft Ready: ${step_draft.draft_text}"
