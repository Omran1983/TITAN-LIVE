version: 1
workflow_id: outcome_a_system_health
name: System Health & Risk Audit
owner: TITAN
governance:
  covenant_compliant: true
  sharia_compliant: true
  ev_check_required: true

steps:
  - id: step_inspect_basics
    agent: AGENT_INSPECTOR
    action: inspect
    inputs:
      scope: "full_system"
      deep_scan: true
    output_key: "inspect_report_id"

  - id: step_analyze_risks
    agent: AGENT_DOCTOR
    action: analyze_risks
    inputs:
      report_ref: "${step_inspect_basics.inspect_report_id}"
      focus: "security_and_compliance"
    output_key: "risk_analysis"

  - id: step_log_run
    agent: AGENT_WORKFLOW_CONDUCTOR
    action: record_outcome_run
    inputs:
      outcome_id: "outcome_a_system_health"
      success: "${step_analyze_risks.is_clean}"
    output_key: "run_record_id"
