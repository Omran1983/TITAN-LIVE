version: 1
agent_id: AGENT_INSPECTOR
name: Inspector
runtime:
  mode: sandbox
  language: python
  entrypoint: wildfire/modules/inspector/main.py
  concurrency: 1
  timeout_ms: 180000

interfaces:
  consumes:
    - topic: az.inspect_requests
      schema: inspect_request_v1
  produces:
    - topic: az.inspect_reports
      schema: inspect_report_v1

permissions:
  read_scopes:
    - fs:apps/**/logs/**
    - http:GET:http://localhost:*
    - supabase:public.az_* # read
  write_scopes:
    - supabase:public.az_inspect_reports
    - fs:wildfire/reports/**

checks:
  - name: "api_routes"
  - name: "ui_console_errors"
  - name: "broken_links"
  - name: "db_integrity_smoke"
  - name: "latency_baseline"

observability:
  heartbeat_sec: 20
  metrics:
    - issues_found
    - 5xx_rate
    - console_error_count
